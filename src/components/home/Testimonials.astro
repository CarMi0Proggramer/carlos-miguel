---
import { Image } from "astro:assets";
import testimonials from "../../assets/collections/testimonials.json";
import Card from "../Card.astro";
import { getLangFromUrl, useTranslations } from "../../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const translations = useTranslations(lang);
---

<section class="max-w-4xl mx-auto px-7 lg:px-0">
  <h2
    class="text-2xl font-bold leading-10 tracking-tight text-neutral-900 dark:text-neutral-100"
  >
    {translations.testimonials.header}
  </h2>
  <p class="mb-6 text-base text-neutral-600 dark:text-neutral-400">
    {translations.testimonials.description}
  </p>
  <div class="grid w-full grid-cols-1 gap-7 mt-7">
    {
      testimonials[lang].map(({ author, position, body, contact, image }) => (
        <Card>
          <blockquote class="text-base text-neutral-600 dark:text-neutral-400 text-pretty">
            {body}
          </blockquote>
          <div class="flex items-start gap-4 mt-4">
            <Image
              src={image}
              alt={author}
              width={64}
              height={64}
              class="size-12 rounded-full"
            />
            <div class="flex flex-col items-start leading-10 tracking-tight">
              <a
                href={contact}
                class="underline text-base font-semibold text-neutral-900 dark:text-neutral-100"
              >
                {author}
              </a>
              <span class="text-sm text-neutral-600 dark:text-neutral-400">
                {position}
              </span>
            </div>
          </div>
        </Card>
      ))
    }
  </div>
</section>
