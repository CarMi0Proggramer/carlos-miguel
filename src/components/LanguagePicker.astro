---
import { getLangFromUrl } from "../i18n/utils";
import { languages } from "../i18n/ui";

const lang = getLangFromUrl(Astro.url);
const path = Astro.url.pathname.split("/").pop();
---

<div class="relative text-neutral-800 dark:text-white leading-tight">
  <button
    id="languagePicker"
    class="flex flex-between gap-2 w-full items-center border border-neutral-300 bg-neutral-100 hover:bg-neutral-200 dark:border-neutral-600 dark:bg-neutral-900 dark:hover:bg-neutral-800 px-2 py-0.5 rounded-md"
  >
    {languages[lang]}
    <svg
      viewBox="0 0 20 20"
      fill="currentColor"
      data-slot="icon"
      aria-hidden="true"
      class="size-5"
    >
      <path
        d="M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z"
        clip-rule="evenodd"
        fill-rule="evenodd"></path>
    </svg>
  </button>
  <div
    id="languagePickerDropdown"
    class="hidden flex-col w-full absolute left-0 top-full mt-2 bg-neutral-100 dark:bg-neutral-900 rounded-md"
  >
    <a
      class="hover:bg-neutral-200 dark:hover:bg-neutral-800 px-4 py-2"
      href={`/es/${path}`}>{languages.es}</a
    >
    <a
      class="hover:bg-neutral-200 dark:hover:bg-neutral-800 px-4 py-2"
      href={`/br/${path}`}>{languages.br}</a
    >
  </div>
</div>
